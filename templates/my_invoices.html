<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
 <title>My Invoices</title>
<meta name="description" content="AI-powered voice-to-invoice generator for freelancers, startups, and businesses. Create invoices in seconds with AI.">
<meta name="keywords" content="AI invoice generator, voice to invoice, invoice automation, free invoice tool, free invoice generator, ">

  <!-- Bootstrap CSS & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"/>

 

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;600;700&display=swap');

    :root {
      --bg-primary: #1a1f2e;
      --bg-card: #242937;
      --accent-primary: #6d5cff;
      --accent-secondary: #00d4ff;
      --text-primary: #ffffff;
      --text-secondary: rgba(255,255,255,0.7);
      --border: rgba(255,255,255,0.1);
    }

    body {
      font-family: 'Roboto Condensed', sans-serif;
      background: radial-gradient(circle at 30% 80%, #00d4ff 10%, transparent 65%),
                  radial-gradient(circle at 75% 25%, #6d5cff 7%, transparent 50%),
                  linear-gradient(160deg, #1a1f2e, #2a324a, #242937);
      color: var(--text-primary);
      padding-top: 72px;
      margin: 0;
      padding-top: 50px;
    }

     /* nav bar  */
    .stylish-logo {
      font-size: 2rem;
      /* background: linear-gradient(90deg, #ff3cff   0%, #7a3cff 100%); */
background: linear-gradient(90deg, #61c0ff 0%, #ff3cff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 800;
      text-transform: uppercase;
    }

    .navbar-custom,
    .navbar-custom .nav-link,
    .navbar-custom .btn-outline-secondary {
      color: #fff !important;
      font-size: 17px;
    }

    /* Get Started Button */
    .get-started-btn {
      font-weight: 600;
      border-radius: 2rem;
      background: linear-gradient(90deg, #43cea2 0%, #185a9d 100%);
      color: #fff !important;
      box-shadow: 0 2px 8px rgba(67, 206, 162, 0.1);
      transition: transform 0.1s, box-shadow 0.1s;
    }

    .get-started-btn:hover {
      transform: translateY(-2px) scale(1.04);
      box-shadow: 0 4px 16px rgba(67, 206, 162, 0.18);
      color: #fff !important;
    }

    .navbar-custom {
      font-family: 'Poppins', sans-serif !important;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: var(--nav-height);
      z-index: 40;

      /* subtle translucent dark shell so text is readable but background still shows */
      background: linear-gradient(180deg, rgba(30, 34, 46, 0.18), rgba(30, 34, 46, 0.08));
      backdrop-filter: blur(8px) saturate(120%);
      -webkit-backdrop-filter: blur(8px) saturate(120%);

      border-bottom: 1px solid rgba(255, 255, 255, 0.04);
      transition: background .18s ease, transform .18s ease;
    }

     /* Nav Underline Effect */
.nav-underline {
  position: relative;
  color: #fff !important;
  transition: color 0.25s ease;
}

/* Hover + Active underline */
.nav-underline::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: -2px; 
  height: 3px;
  background: linear-gradient(90deg, #43cea2 0%, #185a9d 100%);
  border-radius: 2px;
  transform: scaleX(0);
  transform-origin: center;
  transition: transform 0.25s cubic-bezier(.4, 0, .2, 1);
}

/* Show underline only when active or hovered */
.nav-underline:hover::after,
.nav-underline.active::after {
  transform: scaleX(1);
}

/* Active link color */
.nav-underline.active {
  color: #43cea2 !important; 
  font-weight: 600; 
}

    @media (max-width: 991.98px) {
      .navbar-nav {
        gap: 0 !important;
      }

      .get-started-btn {
        margin-left: 0 !important;
        margin-top: 0.5rem;
      }

      .d-flex.align-items-center {
        margin-top: 0.5rem;
      }
    }
    
    /* Footer Styles */
    .footer {
      background: linear-gradient(180deg, rgba(18,21,32,0.97), rgba(26,31,46,0.98));
      color: #cbd5e1;
      font-size: 0.95rem;
      padding-top: 2rem;
    }
    .footer-logo {
      font-size: 1.6rem;
      font-weight: 800;
      background: linear-gradient(90deg, #61c0ff 0%, #ff3cff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-decoration: none;
    }
    .footer p {
      margin: 0;
      color: #94a3b8;
      line-height: 1.6;
    }
    .footer h6 {
      color: #e2e8f0;
      font-size: 1rem;
    }
    .footer ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .footer ul li {
      margin-bottom: 0.5rem;
    }
    .footer ul li a {
      color: #cbd5e1;
      text-decoration: none;
      transition: color 0.2s ease;
      font-weight: 500;
    }
    .footer ul li a:hover {
      color: #00d9f5;
    }
    .footer .social-icons a {
      display: inline-block;
      margin-right: 0.6rem;
      font-size: 1.25rem;
      color: #cbd5e1;
      transition: color 0.3s, transform 0.3s;
    }
    .footer .social-icons a:hover {
      color: #00f5a0;
      transform: translateY(-2px);
    }
    .footer hr {
      border-color: rgba(255,255,255,0.08);
    }
    
.animated-gradient-text {
      background: linear-gradient(90deg, #ffffff, #00d4ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 3rem;
      font-weight: 700;
    }

    .invoice-card {
      background: #242937;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 1rem;
      color: white;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .invoice-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }

    .invoice-card a {
      text-decoration: none;
      color: #00d4ff;
      font-weight: 500;
    }
  
  </style>
</head>
<body>

   <!-- Navbar (Header) -->
  <header>
    <nav class="navbar navbar-expand-lg navbar-custom shadow-sm">
      <div class="container">
        <!-- LEFT: Stylish Text Logo -->
        <a class="navbar-brand stylish-logo" href="{{ url_for('index') }}">InvoCue</a>

        <!-- Hamburger for mobile -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar"
          aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Center and Right Sections -->
        <div class="collapse navbar-collapse" id="mainNavbar">
          <!-- Center Nav Items -->
          <ul class="navbar-nav mx-auto mb-2 mb-lg-0 align-items-lg-center gap-lg-2">
            <li class="nav-item">
              <a class="nav-link nav-underline" href="{{ url_for('index') }}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link nav-underline" href="javascript:void(0)" onclick="goToTool(event)">Generate Invoice</a>
            </li>
            <li class="nav-item">
            <a class="nav-link nav-underline" href="{{ url_for('my_invoices') }}">My Invoices</a>
          </li>
            <li class="nav-item">
              <a class="nav-link nav-underline" href="{{ url_for('pricing') }}">Pricing</a>
            </li>
            <li class="nav-item">
              <a class="nav-link nav-underline" href="{{ url_for('contact') }}">Contact us</a>
            </li>
            <li class="nav-item">
              <a class="btn btn-primary px-4 ms-lg-3 get-started-btn" href="javascript:void(0)"
                onclick="goToTool(event)">
                Get Started Free
              </a>
            </li>
          </ul>

          <!-- Right Auth Buttons -->
          <div class="d-flex align-items-center gap-2 ms-lg-3" id="auth-buttons">
            <a class="btn btn-outline-secondary" href="#">Sign In</a>
            <a class="btn btn-success ms-1" href="#">Sign Up</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <section class="container text-center mt-5 pt-4">
    <h2 class="animated-gradient-text mb-4">My Invoices</h2>
    <p class="text-light mb-5">View, download, and manage all invoices you’ve generated.</p>

    <div id="invoiceList" class="row g-4 justify-content-center">
      <!-- Invoices will be dynamically injected here -->
    </div>
  </section>


    <!-- Footer -->
  <footer class="footer py-5 mt-5">
    <div class="container">
      <div class="row gy-4">
        <!-- About -->
        <div class="col-lg-4 col-md-6">
          <a href="{{ url_for('index') }}" class="footer-logo">InvoCue</a>
          <p class="mt-3">
            Your AI-powered invoice generator.<br>
            <i class="bi bi-check-circle"></i> Create invoices in seconds<br>
            <i class="bi bi-check-circle"></i> Voice + AI Assistance<br>
            <i class="bi bi-check-circle"></i> Export to PDF & Share
          </p>
        </div>
        <!-- Quick Links -->
        <div class="col-lg-2 col-md-6">
          <h6 class="fw-bold mb-3">Quick Links</h6>
          <ul class="list-unstyled">
            <li><a href="{{ url_for('index') }}">Home</a></li>
            <li><a href="{{ url_for('pricing') }}">Pricing</a></li>
            <li><a href="#">Features</a></li>
            <li><a href="#">FAQs</a></li>
          </ul>
        </div>
        <!-- Resources -->
        <div class="col-lg-3 col-md-6">
          <h6 class="fw-bold mb-3">Resources</h6>
          <ul class="list-unstyled">
            <li><a href="#">Docs</a></li>
            <li><a href="#">Support</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
          </ul>
        </div>
        <!-- Social Media -->
        <div class="col-lg-3 col-md-6">
          <h6 class="fw-bold mb-3">Follow Us</h6>
          <div class="social-icons">
            <a href="#"><i class="bi bi-twitter"></i></a>
            <a href="#"><i class="bi bi-linkedin"></i></a>
            <a href="#"><i class="bi bi-github"></i></a>
            <a href="#"><i class="bi bi-facebook"></i></a>
          </div>
        </div>
      </div>
      <hr class="mt-4 mb-3">
      <div class="text-center">
        <p class="mb-0">&copy; 2025 InvoCue. All rights reserved.</p>
      </div>
    </div>
  </footer>
  
  <!-- Bootstrap 5 JS Bundle -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="static/script.js"></script>
  
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { 
    getFirestore, collection, getDocs, query, where, orderBy 
  } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  // --- Firebase Config ---
  const firebaseConfig = {
    apiKey: "AIzaSyCA9AFna15elyWCo7Yqy_UE5ShvzNxp6Ig",
    authDomain: "invocue-ai-invoice-generator.firebaseapp.com",
    projectId: "invocue-ai-invoice-generator",
    storageBucket: "invocue-ai-invoice-generator.firebasestorage.app",
    messagingSenderId: "1000346396091",
    appId: "1:1000346396091:web:11781359527366bdd3d09e",
    measurementId: "G-1KPCS3GV9L"
  };

  // --- Initialize Firebase ---
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const invoiceList = document.getElementById("invoiceList");

  // --- Wait for Clerk to load ---
  async function waitForClerkUser() {
    return new Promise((resolve) => {
      const check = () => {
        if (window.Clerk && window.Clerk.user) resolve(window.Clerk.user);
        else setTimeout(check, 300);
      };
      check();
    });
  }

  // --- Load invoices for the current Clerk user ---
  async function loadInvoices() {
    try {
      const user = await waitForClerkUser();

      if (!user) {
        invoiceList.innerHTML = "<p class='text-warning'>Please sign in to view your invoices.</p>";
        return;
      }

      console.log("🔑 Clerk user detected:", user.id);

      // ✅ Query invoices belonging to this user
      const invoicesRef = collection(db, "invoices");
      const q = query(invoicesRef, where("userId", "==", user.id), orderBy("timestamp", "desc"));
      const snapshot = await getDocs(q);

      if (snapshot.empty) {
        invoiceList.innerHTML = "<p class='text-muted'>No invoices found yet.</p>";
        return;
      }

      let html = "";
      snapshot.forEach((doc) => {
        const data = doc.data();
        html += `
          <div class="col-md-4">
            <div class="invoice-card">
              <h5 class="mb-2">${data.filename || "Invoice"}</h5>
              <p class="text-secondary mb-1">
                <small>${new Date(data.timestamp).toLocaleString()}</small>
              </p>
              <a href="${data.pdfUrl}" target="_blank" class="btn btn-sm btn-outline-info me-2">
                <i class="bi bi-eye"></i> View
              </a>
              <a href="${data.pdfUrl}" download="${data.filename}" class="btn btn-sm btn-primary">
                <i class="bi bi-download"></i> Download
              </a>
            </div>
          </div>
        `;
      });

      invoiceList.innerHTML = html;
    } catch (error) {
      console.error("❌ Error loading invoices:", error);
      invoiceList.innerHTML = "<p class='text-danger'>Error loading invoices.</p>";
    }
  }

  document.addEventListener("DOMContentLoaded", loadInvoices);
</script>


</body>
</html>